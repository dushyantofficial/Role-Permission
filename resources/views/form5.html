<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8"/>
    <meta content="ie=edge" http-equiv="x-ua-compatible"/>
    <meta content="" name="description"/>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
    <title>Acwa Power</title>
    <link href="public/favicon.ico" rel="shortcut icon" type="image/svg"/>
    <link href="style.css" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/all.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.20/dist/sweetalert2.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.all.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/toastify-js@1.11.0/dist/toastify.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" rel="stylesheet" type="text/css">
    <script src="https://code.jquery.com/jquery-3.6.0.js" type="text/javascript"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.15/css/intlTelInput.css" rel="stylesheet"
          type="text/css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.3/css/intlTelInput.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.3/js/intlTelInput.min.js"></script>

    <link href="style.css" rel="stylesheet"/>

    <style>
        .select_input {
            background-color: #dde8f0;
            width: 58%;
            padding: 8px;
            border: 1px solid #015b96;
            border-radius: 8px;
            max-height: 2.5rem;
        }
    </style>
</head>

<body>
<form enctype="multipart/form-data" id="frm" method="post">
    <!-- Submitter Form  Start -->
    <section class="logo" style="
        padding-top: 30px;
        padding-bottom: 30px;     ">
        <a href="index.html" style="display: flex; justify-content: center; width: 22%;"><img
            alt="Acwa Power" class="logo-img formlogo" src="public/ACWA_Power_logo.png"/></a>

    </section>
    <section class="sectiontitle">
        <div>
            <div class="submitter" style="
          font-family: 'Open Sans';
          font-size: 20px;
          font-weight: 700;
          color: #015b96;
          line-height: 38.13px;
        ">
                Submitter Details
            </div>
            <div class="submitter" style="
          font-family: 'Open Sans';
          font-size: 16px;
          font-weight: 700;
          color: #e60101;
          line-height: 29.96px;
          padding-bottom: 15px;
        ">
                All fields are mandatory(*)
            </div>
        </div>
        <div class="">
            <div class="form-section">


                <input class="" id="c_id" maxlength="110" name="c_id" oninput="validateInput(this)"
                       style="display: none"
                       type="text" value=""/>
                <input class="" id="c_code" maxlength="110" name="c_code" oninput="validateInput(this)"
                       style="display: none"
                       type="text" value=""/>

                <div class="form-group">
                    <div class="form-row">
                        <label class="placholder" for="name">Name <span style="color:red">*</span></label>
                        <input class="required-field" id="name" maxlength="110" name="name"
                               oninput="validateInput(this)"
                               type="text"/>
                    </div>
                    <div class="form-row">
                        <label class="placholder" for="contact">Contact Number <span
                            style="color:red">*</span></label>
                        <input class="required-field " id="phone" name="phone" oninput="validateNumeric(event)"
                               style="width:100%; height:100%; border:none; " type="tel"/>
                        <!-- <input type="tel" id="phone" name="phone" style="width:79%; height:100%; margin-left: 4.4rem;"> -->

                    </div>
                </div>
                <div class="form-group">
                    <div class="form-row">
                        <label class="placholder" for="email">Email <span style="color:red">*</span></label>
                        <input class="required-field " id="email" name="email" type="email"/>
                        <div class="error-message" id="emailError" style="display: none;">Invalid email address
                        </div>

                    </div>
                    <span class="error" id="emailError"></span>
                    <div class="form-row">
                        <label class="placholder" for="occupation">Company /University <span
                            style="color:red">*</span></label>
                        <input class="required-field " id="occupation" maxlength="110" name="occupation"
                               oninput="validateInput(this)"
                               type="text"/>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-row">
                        <label class="placholder" for="country">Occupation <span style="color:red">*</span></label>
                        <input class="required-field " id="country" maxlength="110" name="country"
                               oninput="validateInput(this)"
                               type="text"/>
                    </div>
                    <div class="form-row">
                        <label class="placholder" for="university">Country <span style="color:red">*</span></label>
                        <input class="required-field " id="university" maxlength="110" name="university"
                               oninput="validateInput(this)"
                               type="text"/>
                    </div>
                </div>

            </div>
        </div>
        <div>
            <div class="idea" style="
          font-family: 'Open Sans';
          font-size: 22px;
          font-weight: 700;
          color: #015b96;
          line-height: 38.13px;
          padding-bottom: 15px;
        ">
                Idea Details
            </div>
            <!-- <div class="submitter" style="
font-family: 'Open Sans';
font-size: 16px;
font-weight: 700;
color: #e60101;
line-height: 29.96px;
padding-bottom: 15px;
">
    All fields are mandatory(*)
</div> -->
        </div>
        <div class="form-section">
            <div class="form-group" id="idea_details_text">
            </div>
            <div class="form-group" id="idea_details_select">
            </div>
            <div class="media" id="idea_details_radio"
                 style="display: flex; justify-content: space-evenly; gap:10%; flex-wrap: wrap;">
                <!--                <div class="checkbox-mobile">-->
                <!--                    <div class="categorycheck">Category*</div>-->
                <!--                    <div class="pcategory">-->
                <!--                        <input class="required-checkbox" type="radio" id="product" name="group1[]" onchange="toggleCheckboxes1('product')" >-->
                <!--                        <label for="product">Product</label>-->
                <!--                    </div>-->

                <!--                </div>-->
            </div>

            <div class="backbutton" style="padding-inline: 30px;">
                <div class="submit-btn">
                    <button onclick="goback2()"
                            style="border-radius: 8px; font-size: 22px; display:flex; justify-content: center; align-items: center; gap:5px"
                            type="button">

                        Back
                    </button>
                </div>
                <div class="submit-btn">
                    <button onclick="proceedToIdeaDetails()"
                            style="border-radius: 8px; font-size: 22px; display:flex; justify-content: center; align-items: center; gap:5px"
                            type="button">
                        Proceed to Evaluation Criteria Description <img alt="Acwa Power" class="icon-logo"
                                                                        src="public/icon.png"
                                                                        style="align-items: center;"/>
                    </button>
                </div>
            </div>

        </div>
        </div>
    </section>
    <!-- Submitter form end  Start -->

    <!-- Evaluation Criteria Description Start -->
    <section class="form-section-ecd" style="display: none;">
        <div class="evaluation"
             style="font-family: 'Open Sans'; font-size: 24px; font-weight: 800; color: #015b96; line-height: 38.13px; text-align: center; text-decoration: underline;">
            Evaluation Criteria Description
        </div>
        <div class="form-sectioneva">


            <div class="evalution" style="
          font-family: 'Open Sans';
          font-size: 20px;
          font-weight: 700;
          color: #015b96;
          line-height: 38.13px;
        ">
                <div id="criteria-description">
                </div>
            </div>
            <!--            <div>Innovation:</div>-->
            <!--            <div style="font-family: 'Open Sans';-->
            <!--                                font-size: 18px;-->
            <!--                                font-weight: 600;-->
            <!--                                color: #000000;-->
            <!--                                line-height: 35.41px;">-->
            <!--                The level of novelty and ingenuity in the proposed solution.-->
            <!--            </div>-->
            <!--            <div class="container" style="position: relative;">-->

            <!--                <textarea id="word-limit-1" placeholder="Enter your text here" onkeyup="textAreaAdjust(this)"-->
            <!--                          oninput="updateWordCount(this)" style="overflow:hidden"></textarea>-->
            <!--                <p style="position: absolute; bottom: 0px; right: 6px; margin: 0; font-size: 12px; font-weight: 500;">-->
            <!--                    Words left: <span class="wordsLeft">500</span></p>-->

            <!--            </div>-->
            <div class="backbutton" style="padding-inline: 30px;">
                <div class="submit-btn">
                    <button onclick="goback()"
                            style="border-radius: 8px; font-size: 22px; display:flex; justify-content: center; align-items: center; gap:5px"
                            type="button">

                        Back
                    </button>
                </div>
                <div class="submit-btn">
                    <button id="nextButton" onclick="proceedToEvaluationDetails()"
                            style="border-radius: 8px; font-size: 22px; display:flex; justify-content: center; align-items: center; gap:5px"
                            type="button">
                        Proceed to Additional Evaluation Criteria <img alt="Acwa Power" class="icon-logo"
                                                                       src="public/icon.png"
                                                                       style="align-items: center;"/>
                    </button>
                </div>
            </div>


        </div>
    </section>
    <!-- Evaluation Criteria Description End -->

    <!--   Additional Evaluation Criteria Start -->
    <section class="form-section-aec " style="display: none;">
        <div class="evaluation"
             style="font-family: 'Open Sans'; font-size: 24px; font-weight: 800; color: #015b96; line-height: 38.13px; text-align: center; text-decoration: underline;">
            Additional Evaluation Criteria
        </div>


        <div class="form-sectioneva">


            <div class="evalution" style="
        font-family: 'Open Sans';
        font-size: 20px;
        font-weight: 700;
        color: #015b96;
        line-height: 38.13px;
      ">

                <div id="evaluation-criteria">
                </div>

                <!--                <div>Ease of implementation:</div>-->
                <!--                <div style="font-family: 'Open Sans';-->
                <!--                              font-size: 18px;-->
                <!--                              font-weight: 600;-->
                <!--                              color: #000000;-->
                <!--                              line-height: 35.41px;">-->
                <!--                    How easily can the idea be implemented ?-->
                <!--                </div>-->
                <!--                <div class="container" style="position: relative;">-->
                <!--                    <textarea id="word-limit-8" placeholder="Enter your text here" onkeyup="textAreaAdjust(this)"-->
                <!--                              oninput="updateWordCount(this)" style="overflow:hidden"></textarea>-->
                <!--                    <p style="position: absolute; bottom: 0px; right: 6px; margin: 0; font-size: 12px; font-weight: 500;">-->
                <!--                        Words left: <span class="wordsLeft">500</span></p>-->

                <!--                </div>-->

                <div style="color:#5C5B5B; font-weight: 800;">Optional:</div>
                <div style="font-family: 'Open Sans';
                              font-size: 18px;
                              font-weight: 400;
                              color: #5C5B5B;
                              line-height: 38.13px;">
                    1. Support the idea with the document or video (Video to not exceed more than 60 seconds. Please
                    mention your full name and contact information at the beginning of the video. The size to not
                    exceed
                    8 MB)
                </div>
                <div id="fileList" style="text-align: center; padding-top: 20px; padding-bottom: 40px;">
                    <ul id="uploadedFiles" style="list-style: none;"></ul>
                    <label class="uploadfile" for="fileInput1" style="
                                                  text-align: center;
                                               color: #015B96;
                                                   font-family: 'Open Sans';
                                                 font-size: 20px;
                                                   font-weight: 800;
                                                line-height: 38.13px;
                                                   width: 20%;
                                                  border-radius: 8px;
                                                 background-color: #dde8f0;
                                                   border: 1px solid #015B96;
                                                 padding: 8px 60px
                                                   cursor: pointer;
                                                 display:flex;
                                                   justify-content: center;
                                                   align-items: center;
                                              gap:8px">
                        Upload
                        <i class="fas fa-file-upload"></i>
                    </label>
                    <input id="fileInput1" multiple name="attachment[]" style="display: none;" type="file">

                </div>
                <!-- <input type="file" id="fileInput1" name="attachment[]" multiple required> -->
                <div style="color:#015B96; font-weight: 600;">
                    <input id="consentCheckbox" onchange="hideConsentMessage()" type="checkbox">
                    <label for="consentCheckbox">Consent:</label>
                </div>
                <div style="font-family: 'Open Sans';
                              font-size: 14px;
                              font-style: italic;
                              font-weight: 400;
                              color: #5C5B5B;
                              line-height: 29.96px;
                              padding-bottom: 20px;
                              ">

                    By making a submission, you understand and agree that you are not claiming any patent,
                    trademark,
                    copyright, or other right in the submission. You represent that everything you submit is your
                    own o
                    riginal work, that you have all necessary rights to disclose
                    it to us, and that you are not violating the rights of any third party. You agree to indemnify
                    and
                    hold us harmless from any claims, demands, damages, liabilities and costs (including legal fees)
                    asserted by any third party relating
                    in any way to your breach of a representation. If we enter into a development agreement and/or
                    exclusivity arrangement, we will have a shared foreground Intellectual Property.
                </div>
                <div id="consentMessage" style="display: none; color: red; font-weight: 600; padding-bottom: 20px;">
                    Please check the consent to submit the form.
                </div>
                <div class="backbutton">
                    <div class="submit-btn submitback">
                        <button onclick="goback1()"
                                style="border-radius: 8px; font-size: 22px; display:flex; justify-content: center; align-items: center; "
                                type="button">
                            Back
                        </button>
                    </div>
                    <div class="submit-btn" style="padding-bottom: 40px;">
                        <button onclick="return submitForm()" style="border-radius: 8px; font-size: 22px;"
                                type="submit">
                            Submit
                        </button>
                    </div>
                </div>

    </section>
    <!--   Additional Evaluation Criteria end -->

</form>

<!--   Submit Button Logic Here  Start-->
<script>
    function hideConsentMessage() {
        const consentMessage = document.getElementById("consentMessage");
        consentMessage.style.display = "none";
    }

    function submitForm() {
        const consentCheckbox = document.getElementById("consentCheckbox");
        const consentMessage = document.getElementById("consentMessage");

        if (consentCheckbox.checked) {
            // Perform your data submission logic here
        } else {
            // Display message to check the consent
            consentMessage.style.display = "block";
            return false
        }
        return true
    }
</script>
<!--   Submit Button Logic Here End -->

<script>
    var input = document.querySelector("#phone");
    var select = document.querySelector("#country");

    // Initialize intlTelInput
    // var iti = window.intlTelInput(input, {
    //     separateDialCode: true,
    //     initialCountry: "auto",
    // });
    var iti = window.intlTelInput(input, {
        separateDialCode: true,
        initialCountry: "",
    });

    // Populate the country dropdown
    var countries = window.intlTelInputGlobals.getCountryData();
    for (var i = 0; i < countries.length; i++) {
        var country = countries[i];
        var option = document.createElement("option");
        option.value = country.iso2;
        option.textContent = country.name + " (+" + country.dialCode + ")";
        select.appendChild(option);
    }

    // Update intlTelInput when dropdown selection changes
    select.addEventListener("change", function () {
        iti.setCountry(this.value);
    });
</script>
<!--  Email Validation Start -->
<script src="https://cdn.jsdelivr.net/npm/toastify-js" type="text/javascript"></script>
<script>
    const emailInput = document.getElementById("email");
    const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;

    emailInput.addEventListener("input", function () {
        if (!emailPattern.test(emailInput.value)) {
            emailInput.classList.add("error");
        } else {
            emailInput.classList.remove("error");
        }
    });

    emailInput.addEventListener("blur", function () {
        if (!emailPattern.test(emailInput.value)) {
            Toastify({
                text: "Please enter a valid email address.",
                duration: 5000,
                backgroundColor: "#e60101",
            }).showToast();
        }
    });
</script>

<!--  Email Validation End -->

<!--  File Upload Validation Start -->
<script>
    const fileInput = document.getElementById('fileInput1');
    const uploadedFilesContainer = document.getElementById('uploadedFiles');

    fileInput.addEventListener('change', handleFileUpload);

    function handleFileUpload(event) {
        const files = event.target.files;

        for (const file of files) {
            if (isValidFile(file)) {
                const fileItem = document.createElement('li');
                fileItem.className = 'row';
                fileItem.style = 'display: flex; align-items:center; gap:8px; border:1px solid #015B96; padding:5px; border-radius:8px; font-weight:0; font-size:15px; color: #5C5B5B; margin-bottom: 5px;';

                const fileIcon = document.createElement('i');
                fileIcon.className = 'fas fa-file-alt';

                const contentDiv = document.createElement('div');
                contentDiv.className = 'content';

                const detailsDiv = document.createElement('div');
                detailsDiv.className = 'details';

                const fileName = document.createElement('span');
                fileName.className = 'name';
                fileName.textContent = file.name + ' • Uploading';

                const percentSpan = document.createElement('span');
                percentSpan.className = 'percent';
                percentSpan.textContent = '0%';

                const progressBarDiv = document.createElement('div');
                progressBarDiv.className = 'progress-bar';

                const progressBar = document.createElement('div');
                progressBar.className = 'progress';
                progressBar.style.width = '0%';

                progressBarDiv.appendChild(progressBar);

                detailsDiv.appendChild(fileName);
                detailsDiv.appendChild(percentSpan);

                contentDiv.appendChild(detailsDiv);
                contentDiv.appendChild(progressBarDiv);

                fileItem.appendChild(fileIcon);
                fileItem.appendChild(contentDiv);

                uploadedFilesContainer.appendChild(fileItem);

                // Your provided functionality
                const fileTotal = Math.floor(file.size / 1000);
                let fileSize;
                (fileTotal < 1024) ? fileSize = fileTotal + " KB" : fileSize = (file.size / (1024 * 1024)).toFixed(2) + " MB";

                uploadFile(file, fileItem, fileSize);
            }
        }

        fileInput.value = '[]'; // Clear the file input to allow uploading the same files again
    }

    function uploadFile(file, fileItem, fileSize) {

        let loaded = 0;
        const total = file.size;
        const progressInterval = setInterval(() => {
            loaded += Math.floor(total / 100);
            const percent = Math.floor((loaded / total) * 100);
            const progressBar = fileItem.querySelector('.progress');
            progressBar.style.width = percent + '%';

            const percentText = fileItem.querySelector('.percent');
            percentText.textContent = percent + '%';

            if (loaded >= total) {
                clearInterval(progressInterval);

                const checkIcon = document.createElement('i');
                checkIcon.className = 'fas fa-check';

                const deleteIcon = document.createElement('i');
                deleteIcon.className = 'fas fa-times-circle delete-icon';
                deleteIcon.style = 'color:red;';
                deleteIcon.addEventListener('click', () => removeUploadedFile(fileItem));

                // Update the status to "Uploaded"
                fileItem.innerHTML = `
                        <i class="fas fa-file-alt"></i>
                        <div class="content upload">
                            <div class="details">
                                <span class="name">${file.name} • Uploaded</span>
                                <span class="size">${fileSize}</span>
                            </div>
                        </div>
                        <i class="fas fa-check" style="color:green;" ></i>
                    `;

                fileItem.appendChild(deleteIcon);
            }
        }, 100);
    }

    function removeUploadedFile(fileItem) {
        uploadedFilesContainer.removeChild(fileItem);
    }

    function isValidFile(file) {
        const validExtensions = ['jpg', 'jpeg', 'png', 'pdf', 'mp3', 'mp4', 'doc', 'docx', 'ppt', 'pptx', 'xls', 'xlsx', 'csv', 'txt', 'rtf', 'cad', 'psd', 'cdr', 'vsd'];
        const fileExtension = file.name.split('.').pop().toLowerCase();
        const fileSizeInMB = file.size / (1024 * 1024); // Convert bytes to MB

        if (!validExtensions.includes(fileExtension)) {
            Swal.fire({
                icon: 'error',
                title: 'Invalid File',
                text: `The file "${file.name}" is not allowed. “Only file types ['jpg', 'jpeg', 'png', 'pdf', 'mp3', 'mp4', 'doc', 'docx', 'ppt', 'pptx', 'xls', 'xlsx', 'csv', 'txt', 'rtf', 'cad', 'psd', 'cdr', 'vsd'] are allowed.“`,
                confirmButtonText: 'OK'
            });
            return false;
        } else if (fileSizeInMB > 8) {
            Swal.fire({
                icon: 'error',
                title: 'File Size Exceeded',
                text: `The file "${file.name}" exceeds the maximum allowed size of 8 MB. Please upload a smaller file.`,
                confirmButtonText: 'OK'
            });
            return false;
        } else {
            return true;
        }
    }
</script>
<!--  File Upload Validation End -->

<!--  Phone Number Validation Start -->
<script>
    function validateNumeric(event) {
        const inputElement = event.target;
        const value = inputElement.value;
        const numericRegex = /^[0-9+]+$/;

        if (!numericRegex.test(value)) {
            // If the entered value contains non-numeric characters, remove them
            const cleanedValue = value.replace(/[^0-9+]/g, '');
            inputElement.value = cleanedValue;
        }
    }
</script>
<!--  Phone Number Validation Start -->


<!--  Textarea  Validation Start -->
<script>
    function textAreaAdjust(element) {
        element.style.height = "1px";
        element.style.height = (25 + element.scrollHeight) + "px";
    }

    const maxWords = 500;

    function updateWordCount(textarea) {
        const wordsRemaining = maxWords - countWords(textarea.value);
        const wordsLeftElement = textarea.nextElementSibling.querySelector('.wordsLeft');
        var inputValue = textarea.value;
        if (/\<script.*\>/i.test(inputValue) || /\<.*\>/i.test(inputValue)) {
            Toastify({
                text: 'Invalid input: HTML or script tags are not allowed.',
                duration: 5000,
                backgroundColor: "#e60101",
            }).showToast();
            textarea.value = ''; // Clear the textarea
            return false;
        }

        if (wordsRemaining < 0) {
            const exceededWords = -wordsRemaining;
            const words = textarea.value.trim().split(/\s+/).slice(0, maxWords);
            textarea.value = words.join(' ');

            Swal.fire({
                icon: 'warning',
                title: 'Word Limit Exceeded',
                text: `Word limit exceeded by ${exceededWords} words. Please remove ${exceededWords} words to continue.`,
            });
        }

        wordsLeftElement.textContent = `${wordsRemaining}/${maxWords}`;
        textarea.scrollTop = textarea.scrollHeight;
    }


    function countWords(text) {
        return text.trim().split(/\s+/).length;
    }

    const textareas = document.querySelectorAll('textarea');
    textareas.forEach(textarea => {
        textarea.addEventListener('input', () => updateWordCount(textarea));
    });
</script>
<!--  Textarea  Validation End -->

<!--  Back Button Start -->
<script>
    function goback() {
        const submitterSection = document.querySelector('.sectiontitle');
        const ideaDetailsSection = document.querySelector('.form-section-ecd');
        submitterSection.style.display = 'block';
        ideaDetailsSection.style.display = 'none';
        window.scrollTo(0, 0);
    }

    function goback1() {
        const ecdDetailsSection = document.querySelector('.form-section-ecd');
        const aecDetailsSection = document.querySelector('.form-section-aec');
        ecdDetailsSection.style.display = 'block';
        aecDetailsSection.style.display = 'none';
        window.scrollTo(0, 0);
    }

    function goback2() {
        history.back();
        window.scrollTo(0, 0);
    }
</script>
<!--  Back Button End -->

<!--  Proceeded Button Start -->
<script>
    function proceedToEvaluationDetails() {
        var requiredFields = document.querySelectorAll('.required-field1');

        var isValid = true;

        for (var i = 0; i < requiredFields.length; i++) {
            if (requiredFields[i].value === '') {
                isValid = false;
                displayErrorPopup('Please fill in all required fields.');
                break;
            }
        }
        if (isValid) {
            document.querySelector('.form-section-ecd').style.display = 'none';
            document.querySelector('.form-section-aec').style.display = 'block';
            window.scrollTo(0, 0);
        }

    }

    function displayErrorPopup(message) {
        Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: message,
        });
    }
</script>
<!--  Proceeded Button End -->

<!--  Input  Button Validation Start -->
<script>
    function validateInput(inputElement) {
        const validPattern = /^[A-Za-z\s\-]+$/;
        const maxChars = 100;
        const inputValue = inputElement.value;

        if (!validPattern.test(inputValue)) {
            if (!emailPattern.test(emailInput.value)) {
                Toastify({
                    text: 'Please enter valid characters (letters, spaces, and hyphens).',
                    duration: 5000,
                    backgroundColor: "#e60101",
                }).showToast();
            }
            inputElement.value = inputValue.replace(/[^A-Za-z\s\-]+/g, '');
        } else if (inputValue.length > maxChars) {
            Toastify({
                text: `Maximum ${maxChars} characters allowed.`,
                duration: 5000,
                backgroundColor: "#e60101",
            }).showToast();
            inputElement.value = inputValue.slice(0, maxChars);
        }
    }

    function words50limit(inputElement) {
        const validPattern = /^[A-Za-z0-9\s\-]+$/;
        const maxWords = 50; // Set your maximum word limit here
        const inputValue = inputElement.value.trim(); // Remove leading and trailing white spaces

        // Split the input into words using spaces as separators
        const words = inputValue.split(/\s+/);

        if (!validPattern.test(inputValue)) {
            if (!emailPattern.test(emailInput.value)) {
                Toastify({
                    text: 'Please enter valid characters (letters, spaces, and hyphens).',
                    duration: 5000,
                    backgroundColor: "#e60101",
                }).showToast();
            }
            inputElement.value = inputValue.replace(/[^A-Za-z0-9\s\-]+/g, '');
        } else if (words.length > maxWords) {
            Toastify({
                text: `Maximum ${maxWords} words allowed.`,
                duration: 5000,
                backgroundColor: "#e60101",
            }).showToast();
            // Join the first `maxWords` words back together with spaces
            inputElement.value = words.slice(0, maxWords).join(' ');
        }
    }

    function words500limit(inputElement) {
        const validPattern = /^[A-Za-z0-9\s\-]+$/;
        const maxWords = 500; // Set your maximum word limit here
        const inputValue = inputElement.value.trim(); // Remove leading and trailing white spaces

        // Split the input into words using spaces as separators
        const words = inputValue.split(/\s+/);

        if (!validPattern.test(inputValue)) {
            if (!emailPattern.test(emailInput.value)) {
                Toastify({
                    text: 'Please enter valid characters (letters, spaces, and hyphens).',
                    duration: 5000,
                    backgroundColor: "#e60101",
                }).showToast();
            }
            inputElement.value = inputValue.replace(/[^A-Za-z0-9\s\-]+/g, '');
        } else if (words.length > maxWords) {
            Toastify({
                text: `Maximum ${maxWords} words allowed.`,
                duration: 5000,
                backgroundColor: "#e60101",
            }).showToast();
            // Join the first `maxWords` words back together with spaces
            inputElement.value = words.slice(0, maxWords).join(' ');
        }
    }

    // function proceedToIdeaDetails() {
    //     var requiredFields = document.querySelectorAll('.required-field');
    //     const emailInput = document.getElementById("email");
    //     const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
    //     const groups = document.querySelectorAll('input[type="radio"]:checked');
    //     const checkbox = document.querySelectorAll('input[type="checkbox"]:checked');
    //     const radiocount = document.querySelectorAll('.categorycheck');
    //     const radiocount1 = document.querySelectorAll('.required-checkbox:checked');
    //     const totalcount = checkbox.length + radiocount1.length;
    //     var isValid = true;
    //     console.log ("radiocount length" ,radiocount.length);
    //     console.log ("radiocount1 length" ,radiocount1.length);
    //     console.log ("groups", groups);
    //     console.log ("checkbox", checkbox.length);
    //     for (var i = 0; i < requiredFields.length; i++) {
    //         if (requiredFields[i].value === '') {
    //             isValid = false;
    //             displayErrorPopup('Please fill in all required fields.');
    //             return;
    //         }
    //     }
    //     var SelectedCountryCode = document.querySelectorAll('.iti__selected-dial-code');
    //
    //     if (SelectedCountryCode[0].innerText === "") {
    //         isValid = false;
    //         displayErrorPopup('Please fill the Country Code');
    //         return;
    //     }
    //     if (!emailPattern.test(emailInput.value)) {
    //         Swal.fire({
    //             icon: 'error',
    //             title: 'Invalid Email',
    //             text: 'Please enter a valid email address (abc@example.com)',
    //         });
    //         return;
    //     }
    //     if (radiocount.length !== radiocount1.length) { // Each group has two radio buttons
    //         isValid = false;
    //         displayErrorPopup("Please make a selection in all radio/checkbox button groups.");
    //         return;
    //     }
    //
    //     if (isValid) {
    //         document.querySelector('.sectiontitle').style.display = 'none';
    //         document.querySelector('.form-section-ecd').style.display = 'block';
    //         window.scrollTo(0, 0);
    //     }
    // }
    function proceedToIdeaDetails() {
        var requiredFields = document.querySelectorAll('.required-field');
        const emailInput = document.getElementById("email");
        const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
        const groups = document.querySelectorAll('input[type="radio"].required-checkbox:checked');
        const checkbox = document.querySelectorAll('input[type="checkbox"].required-checkbox:checked');
        const radiocount = document.querySelectorAll('.categorycheck');

        var isValid = true;
        console.log("radiocount length", radiocount.length);
        console.log("groups", groups.length);
        console.log("checkbox", checkbox.length);
        for (var i = 0; i < requiredFields.length; i++) {
            if (requiredFields[i].value === '') {
                isValid = false;
                displayErrorPopup('Please fill in all required fields.');
                return;
            }
        }
        var SelectedCountryCode = document.querySelectorAll('.iti__selected-dial-code');

        if (SelectedCountryCode[0].innerText === "") {
            isValid = false;
            displayErrorPopup('Please fill the Country Code');
            return;
        }
        if (!emailPattern.test(emailInput.value)) {
            Swal.fire({
                icon: 'error',
                title: 'Invalid Email',
                text: 'Please enter a valid email address (abc@example.com)',
            });
            return;
        }

        let checkboxcount = 0;
        if (checkbox.length >= 1) {
            checkboxcount = 1;
        }
        const totalcount = checkboxcount + groups.length;
        console.log("totalcount", totalcount);
        if (radiocount.length !== totalcount) {
            isValid = false;
            displayErrorPopup("Please make a selection in all radio/checkbox button groups.");
            return;
        }

        if (isValid) {
            document.querySelector('.sectiontitle').style.display = 'none';
            document.querySelector('.form-section-ecd').style.display = 'block';
            window.scrollTo(0, 0);
        }
    }

    function displayErrorPopup(message) {
        Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: message,
        });
    }
</script>
<!--  Input  Button Validation End -->

<!--  Checkbox  Button Validation Start -->
<script>
    function toggleCheckboxes1(selectedCheckbox) {
        const checkboxes = document.querySelectorAll('[name^="group1"]');
        checkboxes.forEach(checkbox => {
            if (checkbox.id !== selectedCheckbox) {
                checkbox.checked = false;
            }
        });
    }

    function toggleCheckboxes2(selectedCheckbox) {
        const checkboxes = document.querySelectorAll('[name^="group2"]');
        checkboxes.forEach(checkbox => {
            if (checkbox.id !== selectedCheckbox) {
                checkbox.checked = false;
            }
        });
    }

    function toggleCheckboxes3(selectedCheckbox) {
        const checkboxes = document.querySelectorAll('input[name="Type"]');
        checkboxes.forEach(checkbox => {
            if (checkbox.id !== selectedCheckbox) {
                checkbox.checked = false;
            }
        });
    }

    function toggleCheckboxes4(selectedCheckbox) {
        const otherInput = document.getElementById("otherInput2");
        const otherCheckbox = document.getElementById("other");
        const checkboxes = document.querySelectorAll('input[name="objective"]');
        checkboxes.forEach(checkbox => {
            if (checkbox.id !== selectedCheckbox) {
                checkbox.checked = false;
            }
            if (checkbox.id === 'other') {
                otherInput.disabled = !otherCheckbox.checked;
            }
        });
    }

    function toggleInputBox() {
        const otherInput = document.getElementById("otherInput");
        const othersCheckbox = document.getElementById("others");
        otherInput.disabled = !othersCheckbox.checked;
    }


    document.getElementById("others").addEventListener("change", toggleInputBox);
    document.getElementById("other").addEventListener("change", toggleInputBox2);
</script>
<!--  Checkbox  Button Validation End -->

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Get the URLSearchParams object
        const urlParams = new URLSearchParams(window.location.search);

        // Get the value of the 'id' parameter from the URL
        const id = urlParams.get('id');

        var idea_details_text = document.getElementById('idea_details_text');
        var idea_details_select = document.getElementById('idea_details_select');
        var idea_details_radio = document.getElementById('idea_details_radio');
        var idea_details_dropdown = document.getElementById('idea_details_dropdown');
        var criteria_description = document.getElementById('criteria-description');
        var evaluation_criteria = document.getElementById('evaluation-criteria');
        $.ajax({
            url: 'https://acwanet-api.ntb.one/api/campaign_idea_details1',
            data: {id: id}, // Pass the extracted id parameter to the API
            dataType: 'json',
            method: 'GET',
            success: function (response) {
                var answers = response;


                console.log("answers", answers);
                answers.forEach(function (answer) {
                    var asterisk = answer.mandatory == 1 ? '<span style="color:red">*</span>' : '';
                    if (answer.type == 'idea_details') {
                        if (answer.input_type == 'text' || answer.input_type == 'date' || answer.input_type == 'number') {
                            console.log("answertype", answer);
                            if (asterisk !== '') {
                                if (answer.label_name[0] !== '') {
                                    var idea_details_textContent = `
                    <div class="form-row">
                        <label for="name" class="placholder">${answer.question}${asterisk}</label>
                        <input class="required-field " type="${answer.input_type}" id="qs_${answer.id}" name="qs_${answer.id}" "
                               oninput="words50limit(this)" />
                    </div>
                    `;
                                } else {
                                    var idea_details_textContent = `
                    <div class="form-row">
                        <label for="name" class="placholder">${answer.question}${asterisk}</label>
                        <input class="required-field" type="${answer.input_type}" id="qs_${answer.id}" name="qs_${answer.id}" "
                               oninput="words500limit(this)" />
                    </div>
                    `;
                                }
                            } else {
                                if (answer.label_name[0] !== '') {
                                    var idea_details_textContent = `
                    <div class="form-row">
                        <label for="name" class="placholder">${answer.question}${asterisk}</label>
                        <input class="" type="${answer.input_type}" id="qs_${answer.id}" name="qs_${answer.id}" "
                               oninput="words50limit(this)" />
                    </div>
                    `;
                                } else {
                                    var idea_details_textContent = `
                    <div class="form-row">
                        <label for="name" class="placholder">${answer.question}${asterisk}</label>
                        <input class="" type="${answer.input_type}" id="qs_${answer.id}" name="qs_${answer.id}" "
                               oninput="words500limit(this)" />
                    </div>
                    `;
                                }
                            }
                            idea_details_text.innerHTML += idea_details_textContent;
                        } else if (answer.input_type == 'radio' || answer.input_type == 'checkbox') {
                            var jsonString = answer.input_value;
                            var decodedArray = JSON.parse(jsonString);
                            // console.log("decodedarray",decodedArray);
                            var questionNameDisplayed = false;
                            var idea_details_radioContent = '';
                            if (asterisk !== '') {
                                idea_details_radioContent += `<div style="flex:1; margin-bottom:20px; margin-left:3%; margin-right:3%">
                                    <div class="categorycheck">${answer.question}${asterisk}</div>`;
                                decodedArray.forEach((value, index) => {
                                    // console.log(value)
                                    idea_details_radioContent += `
                                    <div style="width: 98.5%">
                `;
                                    questionNameDisplayed = false; // Set the flag to indicate that the question name has been displayed
                                    idea_details_radioContent += `
                <div class="" >
                    <div class="pcategory">
                        <input class="required-checkbox" value="${value}" type="${answer.input_type}" id="rad_${index}" name="rad_${answer.id}" >
                        <label for="product">${value}</label>
                    </div>
                     <div class="pcategory">
                        <input class="required-checkbox" value="" type="text" id="rad_${index}" name="rad_${answer.id}" >
                        <label for="product">${value}</label>
                    </div>
                </div>
            `;
                                    // Append 'idea_details_radioContent' to the radio container
                                    // idea_details_radio.innerHTML += idea_details_radioContent;
                                });
                                idea_details_radioContent += `</div>`;
                            } else {
                                idea_details_radioContent += `<div style="flex:1; margin-bottom:20px; margin-left:3%; margin-right:3%">
                                    <div class="categorycheck1">${answer.question}${asterisk}</div>`;
                                decodedArray.forEach((value, index) => {
                                    // console.log(value)
                                    idea_details_radioContent += `
                                    <div style="width: 98.5%">
                `;
                                    questionNameDisplayed = false; // Set the flag to indicate that the question name has been displayed
                                    idea_details_radioContent += `
                <div class="" >
                    <div class="pcategory">
                        <input class="" value="${value}" type="${answer.input_type}" id="rad_${index}" name="rad_${answer.id}" >
                        <label for="product">${value}</label>
                    </div>
                </div>
            `;
                                });
                                idea_details_radioContent += `</div>`;
                            }
                            idea_details_radio.innerHTML += idea_details_radioContent;

                        } else if (answer.input_type == 'dropdown') {
                            var jsonString = answer.input_value;
                            var decodedArray = JSON.parse(jsonString);
                            // console.log("decodedarray",decodedArray);
                            var questionNameDisplayed = false;
                            var idea_details_radioContent = '';
                            if (asterisk !== '') {
                                var answerContent = `
                            <div class="form-row" id="${answer.label_name}">
                    <label class="placholder">${answer.question}:${asterisk} </label>
                            <select class="required-field select_input" id="qs_${answer.id}" name="qs_${answer.id}" placeholder="Enter your text here" >
    <option value="">Select</option>
    `;
                                decodedArray.forEach((value, index) => {
                                    answerContent += `<option>` + value + `</option>`;
                                });
                                answerContent += ` </select>
                        </div>
                `;
                            } else {
                                var answerContent = `
                            <div class="form-row" id="${answer.label_name}">
                    <label class="placholder">${answer.question}:${asterisk} </label>
                            <select class="select_input" id="qs_${answer.id}" name="qs_${answer.id}" placeholder="Enter your text here" >
    <option value="">Select</option>
    `;
                                decodedArray.forEach((value, index) => {
                                    answerContent += `<option>` + value + `</option>`;
                                });
                                answerContent += ` </select>
                        </div>
                `;
                            }
                            idea_details_select.innerHTML += answerContent;
                        }
                    } else if (answer.type == 'criteria_description' || answer.type == 'evaluation_criteria') {
                        var answerContent = ``;
                        if (asterisk !== '') {
                            if (answer.type == 'criteria_description') {
                                answerContent = `
                    <div id="${answer.label_name}">
                    <div>${answer.label_name}:</div>
                    </div>
                     <div style="font-family: 'Open Sans';
                                font-size: 18px;
                                font-weight: 600;
                                color: #000000;
                                line-height: 35.41px;">
                 ${answer.question}${asterisk}
            </div>
             <div class="container" style="position: relative;">

                            <textarea class="required-field1" id="qs_${answer.id}" name="qs_${answer.id}" placeholder="Enter your text here" onkeyup="textAreaAdjust(this)"
                               oninput="updateWordCount(this)" style="overflow:hidden"></textarea>
                            <p style="position: absolute; bottom: 0px; right: 6px; margin: 0; font-size: 12px; font-weight: 500;">
                                Words left: <span class="wordsLeft">500</span></p>

                        </div>

</div>
                `;
                            }
                        } else {
                            if (answer.type == 'criteria_description') {
                                answerContent = `
                    <div id="${answer.label_name}">
                    <div>${answer.label_name}:</div>
                    </div>
                     <div style="font-family: 'Open Sans';
                                font-size: 18px;
                                font-weight: 600;
                                color: #000000;
                                line-height: 35.41px;">
                 ${answer.question}${asterisk}
            </div>
             <div class="container" style="position: relative;">

                            <textarea class="" id="qs_${answer.id}" name="qs_${answer.id}" placeholder="Enter your text here" onkeyup="textAreaAdjust(this)"
                               oninput="updateWordCount(this)" style="overflow:hidden"></textarea>
                            <p style="position: absolute; bottom: 0px; right: 6px; margin: 0; font-size: 12px; font-weight: 500;">
                                Words left: <span class="wordsLeft">500</span></p>

                        </div>

</div>
                `;
                            }
                        }

                        if (asterisk !== '') {
                            if (answer.type == 'evaluation_criteria') {
                                answerContent = `
                    <div id="${answer.label_name}">
                    <div>${answer.label_name}:</div>
                    </div>
                     <div style="font-family: 'Open Sans';
                                font-size: 18px;
                                font-weight: 600;
                                color: #000000;
                                line-height: 35.41px;">
                 ${answer.question}${asterisk}
            </div>
             <div class="container" style="position: relative;">

                            <textarea class="required-field2" id="qs_${answer.id}" name="qs_${answer.id}" placeholder="Enter your text here" onkeyup="textAreaAdjust(this)"
                               oninput="updateWordCount(this)" style="overflow:hidden"></textarea>
                            <p style="position: absolute; bottom: 0px; right: 6px; margin: 0; font-size: 12px; font-weight: 500;">
                                Words left: <span class="wordsLeft">500</span></p>

                        </div>

</div>
                `;
                            }
                        } else {
                            if (answer.type == 'evaluation_criteria') {
                                answerContent = `
                    <div id="${answer.label_name}">
                    <div>${answer.label_name}:</div>
                    </div>
                     <div style="font-family: 'Open Sans';
                                font-size: 18px;
                                font-weight: 600;
                                color: #000000;
                                line-height: 35.41px;">
                 ${answer.question}${asterisk}
            </div>
             <div class="container" style="position: relative;">

                            <textarea class="" id="qs_${answer.id}" name="qs_${answer.id}" placeholder="Enter your text here" onkeyup="textAreaAdjust(this)"
                               oninput="updateWordCount(this)" style="overflow:hidden"></textarea>
                            <p style="position: absolute; bottom: 0px; right: 6px; margin: 0; font-size: 12px; font-weight: 500;">
                                Words left: <span class="wordsLeft">500</span></p>

                        </div>

</div>
                `;
                            }
                        }
                        if (answer.type == 'criteria_description') {
                            criteria_description.innerHTML += answerContent;
                        } else {
                            evaluation_criteria.innerHTML += answerContent;
                        }

                    }

                });
            }
        });
    });


</script>
<script>
    $(document).on('submit', '#frm', function (e) {
        var urlParams = new URLSearchParams(window.location.search);
        var id = urlParams.get('id');
        var dialCodeDiv = document.getElementsByClassName('iti__selected-dial-code');
        if (dialCodeDiv.length > 0) {
            // Get the first element from the collection (or use a specific index)
            var dialCodeDiv = dialCodeDiv[0];
            var CodeInput = document.getElementById('c_code');
            var dialCode = dialCodeDiv.textContent;
            CodeInput.value = dialCode;
        }
        var requiredFields = document.querySelectorAll('.required-field2');
        for (var i = 0; i < requiredFields.length; i++) {
            if (requiredFields[i].value === '') {
                displayErrorPopup('Please fill in all required fields.');
                return false;
            }
        }
        document.getElementById('c_id').value = id;
        e.preventDefault();
        // var formData=$('#frm').serialize();
        var formData = new FormData(document.getElementById('frm'));
        // var totalfiles = document.getElementById('fileInput1').files.length;
        // for (var index = 0; index < totalfiles; index++) {
        //     formData.append("attachment[]", document.getElementById('fileInput1').files[index]);
        // }
        // console.log(formData);
        // console.log(new FormData(document.getElementById('frm')));
        // // return false;
        $.ajax({
            url: 'https://acwanet.local/api/save_campaign_idea',
            type: 'POST',
            processData: false,   // Prevent jQuery from processing data
            contentType: false,   // Prevent jQuery from setting contentType
            dataType: 'JSON',
            data: formData,
            success: function () {

                Swal.fire({
                    icon: 'success',
                    title: 'Form submitted successfully!',
                    text: 'Thank you for your submission.',
                    confirmButtonText: 'OK'
                }).then((result) => {
                    if (result.isConfirmed) {
                        // Reset the form data and consent
                        var form = document.getElementById("frm");

                        form.reset();
                        const consentCheckbox = document.getElementById("consentCheckbox");
                        consentCheckbox.checked = false;

                        // Optional: Scroll back to the top of the page
                        window.scrollTo(0, 0);
                    }
                });
            }
        })
    })
</script>
</body>

</html>
